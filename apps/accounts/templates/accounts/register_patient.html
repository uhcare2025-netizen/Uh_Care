{% extends "base.html" %}
{% load static %}

{% block title %}Patient Registration - UH Care{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="{% static 'css/auth.css' %}">
<style>
    /* Override primary color to blue for patient pages */
    .auth-sidebar {
        background: linear-gradient(135deg, #004a99 0%, #002d6b 100%);
    }

    .btn-auth-primary {
        background-color: #004a99;
    }

    .btn-auth-primary:hover {
        background-color: #002d6b;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
        border-color: #004a99;
        box-shadow: 0 0 0 3px rgba(0, 74, 153, 0.15);
    }

    .form-section-title {
        border-bottom-color: #004a99;
        color: #004a99;
    }
</style>
{% endblock %}


{% block content %}
<div class="auth-page">
    <div class="auth-page-bg">
        <video autoplay muted loop playsinline>
            <source src="{% static 'videos/Back-ground.mp4' %}" type="video/mp4">
        </video>
        <div class="auth-page-overlay"></div>
    </div>

    <div class="auth-container">
        <!-- SIDEBAR -->
        <div class="auth-sidebar">
            <div class="auth-sidebar-content">
                <img src="{% static 'images/side-image.png' %}" alt="UH Care" class="auth-sidebar-image">
                <h2>Join UH Care</h2>
                <p>Register to book services, order pharmacy items, and manage your health</p>
                
                <div class="auth-sidebar-benefits">
                    <div class="auth-sidebar-benefit">
                        <i class="fas fa-calendar-check"></i>
                        <span>Easy Scheduling</span>
                    </div>
                    <div class="auth-sidebar-benefit">
                        <i class="fas fa-file-medical"></i>
                        <span>Your Records</span>
                    </div>
                    <div class="auth-sidebar-benefit">
                        <i class="fas fa-envelope"></i>
                        <span>Direct Messaging</span>
                    </div>
                    <div class="auth-sidebar-benefit">
                        <i class="fas fa-pills"></i>
                        <span>Pharmacy Orders</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- FORM SECTION -->
        <div class="auth-form-section">
            <div class="auth-form-header">
                <h1><i class="fas fa-user-check"></i> Patient Registration</h1>
                <p>Create your secure account</p>
            </div>

            {% if form.errors and not form.non_field_errors %}
                <div class="alert alert-danger">
                    Please correct the errors below.
                </div>
            {% endif %}

            {% if form.non_field_errors %}
                <div class="alert alert-danger">{{ form.non_field_errors }}</div>
            {% endif %}

            <form method="post" class="auth-form">
                {% csrf_token %}

                <!-- Personal Information -->
                <div class="form-section-title">Personal Information</div>

                {% for field in form %}
                    {% if field.name not in "password1,password2" %}
                        <div class="form-group {% if field.errors %}has-error{% endif %}">
                            <label for="{{ field.id_for_label }}">
                                {% if field.name == "first_name" %}<i class="fas fa-user"></i>{% endif %}
                                {% if field.name == "last_name" %}<i class="fas fa-user"></i>{% endif %}
                                {% if field.name == "email" %}<i class="fas fa-envelope"></i>{% endif %}
                                {% if field.name == "phone_number" %}<i class="fas fa-phone"></i>{% endif %}
                                {% if field.name == "date_of_birth" %}<i class="fas fa-birthday-cake"></i>{% endif %}
                                {% if field.name == "address" %}<i class="fas fa-map-marker-alt"></i>{% endif %}
                                {% if field.name == "medical_history" %}<i class="fas fa-file-medical"></i>{% endif %}
                                {{ field.label }}
                            </label>
                            {{ field }}
                            {% if field.help_text %}
                                <div class="form-text">{{ field.help_text|safe }}</div>
                            {% endif %}
                            {% if field.errors %}
                                <ul class="field-errors">
                                    {% for error in field.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                    {% endif %}
                {% endfor %}

                <!-- Account Security -->
                <div class="form-section-title">Account Security</div>

                {% for field in form %}
                    {% if field.name == "password1" or field.name == "password2" %}
                        <div class="form-group {% if field.errors %}has-error{% endif %}">
                            <label for="{{ field.id_for_label }}">
                                <i class="fas fa-lock"></i> {{ field.label }}
                            </label>
                            {{ field }}
                            {% if field.help_text %}
                                <div class="form-text">{{ field.help_text|safe }}</div>
                            {% endif %}
                            {% if field.errors %}
                                <ul class="field-errors">
                                    {% for error in field.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                    {% endif %}
                {% endfor %}

                <button type="submit" class="btn-auth btn-auth-primary">
                    <i class="fas fa-check-circle"></i> Create Account
                </button>
            </form>

            <div class="auth-links">
                <p>Already have an account? <a href="{% url 'accounts:login' %}">Login here</a></p>
                <p>Are you a healthcare provider? <a href="{% url 'accounts:register_provider' %}">Register as Provider</a></p>
            </div>
        </div>
    </div>
</div>

<style>
    .form-section-title {
        font-size: 0.95rem;
        font-weight: 700;
        color: #004a99;
        margin-top: 1.5rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #e5e5ea;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .form-section-title:first-child {
        margin-top: 0;
    }
</style>
{% endblock %}